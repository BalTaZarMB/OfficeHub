import{i as e,b as i}from"./index-CP9bbISh.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{M as t,U as a}from"./arco-CSlgBs8T.js";import{d as r,r as l,c as s,j as n,n as o,u as p}from"./vue-CE51Rq-N.js";const m=5242880,d=i(r({__name:"index",props:{limit:{},imgUrl:{},parentRef:{},validateStr:{}},emits:["update:imgUrl"],setup(i,{emit:r}){const d=i,u=r,v=l([]),c=s((()=>(d.imgUrl?d.imgUrl.split(","):[]).map((e=>({url:e}))))),f=i=>{const{size:a}=i;if(a>m)return void t.error("请上传低于5M的文件");const r=new FormData;r.append("file",i),function(i){return e.post("/files/upload",i)}(r).then((async e=>{const{url:i,filename:t,size:a}=e;v.value.push(i),d.validateStr&&d.parentRef.validateField([d.validateStr]).then((()=>{d.parentRef.clearValidate(d.validateStr)})),u("update:imgUrl",v.value.toString())}))},g=e=>{const{url:i}=e,t=i;v.value=v.value.filter((e=>e!==t)),u("update:imgUrl",v.value.toString())};return(e,i)=>{const t=a;return n(),o("div",null,[p(t,{"file-list":c.value,"onUpdate:fileList":i[0]||(i[0]=e=>c.value=e),"list-type":"picture-card","image-preview":"",limit:e.limit?e.limit:1,onBeforeUpload:f,onBeforeRemove:g},null,8,["file-list","limit"])])}}}),[["__scopeId","data-v-965ac577"]]);export{d as _};
