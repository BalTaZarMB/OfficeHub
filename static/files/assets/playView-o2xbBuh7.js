const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-0NgBIML-.js","assets/index-CP9bbISh.js","assets/vue-CE51Rq-N.js","assets/arco-CSlgBs8T.js","assets/index-DgS3TR8z.css","assets/index-BHrxhp-L.css","assets/index-BVdvKeVh.css","assets/index-Mb2FwH0E.css","assets/index-6rnfXikd.css","assets/index-8er2yjEK.css","assets/index-CD0PvSSd.css","assets/index-DMsf4HX_.css","assets/index-AiJAGXR2.css","assets/index-CmHRKhBm.css","assets/index-BdBJDoqm.js","assets/dom-w3hEyMar.js","assets/index-DLevhAQE.js","assets/dataModel-BAnfpXEG.js","assets/editor-erg3WYaJ.js","assets/file-5T113FlP.js","assets/dom2imgBlob-9Y9ueTAB.js","assets/mitt-DRzrVJO_.js","assets/regexp-get-flags-C7Uvd9jb.js","assets/index.esm-CMCG6-Sp.js","assets/index-DcbzwQnB.css","assets/index-BjBdBAHx.css"])))=>i.map(i=>d[i]);
import{g as e,u as a,_ as l,b as s}from"./index-CP9bbISh.js";/* empty css              *//* empty css              *//* empty css              */import{c as t,I as i}from"./index.module-j6bqOxnK.js";import{g as o}from"./dataModel-BAnfpXEG.js";import{k as n,I as r,l as d}from"./arco-CSlgBs8T.js";import{d as u,r as c,c as v,a as p,j as m,n as g,m as f,s as x,$ as y,u as _,l as h,W as j,p as b,a3 as w,B as V}from"./vue-CE51Rq-N.js";import"./editor-erg3WYaJ.js";const C=s(u({__name:"playView",emits:["handleChangeData"],setup(s,{expose:u,emit:C}){const I=w((()=>l((()=>import("./index-0NgBIML-.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])))),k=w((()=>l((()=>import("./index-BdBJDoqm.js").then((e=>e.bx))),__vite__mapDeps([14,1,2,3,4,15,16,17,18,19,20,21,22,23,24,6,7,25,11]))));e();const E=c(null),B=c({x:0,y:0}),D=e=>{B.value={x:e.clientX,y:e.clientY}},O=v((()=>({left:`${B.value.x}px`,top:`${B.value.y}px`}))),F=a(),H=c(!1),P=c(!1),R=c(),W=c(!1),L=c(!0),M=c(""),$=p({a:111}),A=c(),T=c(-1),q=C,z=e=>{A.value=e,L.value=!1,X()},G=async(e,a)=>{T.current=e.blocks.getCurrentBlockIndex();try{await e.saver.save()}catch(l){}P.value=!0,H.value=!0},Q=e=>{Object.assign($,e)},U=()=>{W.value=!1},X=async()=>{var a,l;const s=await o({tid:null==(a=e())?void 0:a.tid,uid:F.userId});M.value=(null==(l=e())?void 0:l.title)||s.title||"",q("handleChangeData",{title:M.value,vt:s.vt,hasFav:s.hasFav||!1}),s.data&&(e=>{var a;A.value.blocks.render({blocks:e.schema}),Object.assign($,(null==(a=e.config)?void 0:a.waterConfig)||{})})(s.data)};return u({editorRef:A,Fullscreen:()=>{V((()=>{document.getElementById("playView").requestFullscreen()}))}}),(e,a)=>{const l=i,s=n,o=r,u=d;return m(),g("div",{id:"playView",class:x([y(t).playView,y(t).fullscreenContainer]),onMousemove:D},[f("div",{class:x(y(t).playViewWrap)},[f("div",{class:x(y(t).playViewBox),ref_key:"docRef",ref:R},[_(y(I),{visible:y(W),value:y($),onHandleWaterChange:Q,onHandleWaterModalClose:U},{default:h((()=>[_(u,{style:{position:"relative",overflow:"auto",padding:"20px","border-radius":"6px",height:"100vh"},class:"colorBgContainer pubCol"},{default:h((()=>[y(L)?(m(),g("div",{key:0,class:x(y(t).isLoadingBox)},[_(s,{loading:y(L),tip:"文档加载中..."},{icon:h((()=>[_(l)])),_:1},8,["loading"])],2)):(m(),g("div",{key:1,class:x(y(t).titleIpt)},[_(o,{modelValue:y(M),"onUpdate:modelValue":a[0]||(a[0]=e=>j(M)?M.value=e:null),placeholder:"请在此输入标题",size:"large"},null,8,["modelValue"])],2)),_(y(k),{minHeight:60,readOnly:!0,onGetEditorInstance:z,onHandleEditorChange:G})])),_:1})])),_:1},8,["visible","value"])],2)],2),f("div",{ref_key:"laserPointer",ref:E,class:x(y(t).laserPointer),style:b(y(O))},[f("div",{class:x(y(t).whiteDot)},null,2)],6)],34)}}}),[["__scopeId","data-v-81e22d83"]]);export{C as default};
