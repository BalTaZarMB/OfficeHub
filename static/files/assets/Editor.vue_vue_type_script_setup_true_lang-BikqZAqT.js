const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mind-p792O8dd.js","assets/FileSaver.min-ANdwnWHA.js","assets/arco-CSlgBs8T.js","assets/vue-CE51Rq-N.js","assets/index-CP9bbISh.js","assets/index-DgS3TR8z.css","assets/dataModel-BAnfpXEG.js","assets/editor-erg3WYaJ.js","assets/index-DJ09e1LN.css","assets/index-CD0PvSSd.css","assets/index-Djok-Mpy.css","assets/index-BVdvKeVh.css","assets/index-DMsf4HX_.css"])))=>i.map(i=>d[i]);
import{b as e,i as a,u as o,g as t,p as l,k as n,_ as s}from"./index-CP9bbISh.js";/* empty css              */import{a as r,g as i,h as c,i as d,j as f}from"./dataModel-BAnfpXEG.js";/* empty css              *//* empty css              */import{C as u,S as m,I as p,B as v,k as _,M as g}from"./arco-CSlgBs8T.js";import{d as h,j as b,n as x,u as w,l as C,F as y,O as j,$ as L,s as k,m as I,y as D,r as T,W as B,x as F,a as S,w as A,c as E,a4 as $,o as V,a9 as z,L as M,k as P,q as O,p as W,a3 as R,B as q}from"./vue-CE51Rq-N.js";/* empty css              *//* empty css              */const J={mindThemeContainer:"_mindThemeContainer_1jem2_1",card:"_card_1jem2_10",cardTitle:"_cardTitle_1jem2_20"},N=[{text:"默认",coverImg:"http://orange.turntip.cn/uploads/busy-server/1_1937838c50a.jpg",theme:{name:"Latte",palette:["#4968a3","#3b88c4","#4fa3d4","#2b5b84","#367fa2","#5e93b7","#4a719c","#28567d","#214e6d","#336699"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}},{text:"电子",coverImg:"http://orange.turntip.cn/uploads/busy-server/2_193783debef.jpg",theme:{name:"Latte",palette:["rgb(74, 144, 226)","rgb(139, 195, 74)","rgb(255, 165, 0)","rgb(255, 192, 203)","rgb(139, 0, 0)","rgb(34, 139, 34)"],cssVar:{"--main-color":"#BCD8FB","--main-bgcolor":"#0D1537","--root-bgcolor":"#0D1537","--root-color":"#BCD8FB","--color":"#BCD8FB","--bgcolor":"#09020C","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}},{text:"浅色",coverImg:"http://orange.turntip.cn/uploads/busy-server/3_193783e4622.jpg",theme:{name:"Latte",palette:["#444b53","#a1a5a9"],cssVar:{"--main-color":"#444b53","--main-bgcolor":"#ffffff","--root-bgcolor":"#ffffff","--root-color":"#444b53","--color":"#a3a6a9","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}},{text:"缤纷",coverImg:"http://orange.turntip.cn/uploads/busy-server/4_193783e951e.jpg",theme:{name:"Latte",palette:["#403690","#5d8cd2","#EC7562","#F4B641","#9AA2B0","#4D9EB3","#DC7FC7","#7D46E6","#82BF62"],cssVar:{"--main-color":"#444B53","--main-bgcolor":"#ffffff","--root-bgcolor":"#ffffff","--root-color":"#444b53","--color":"#919AA9","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}},{text:"深色",coverImg:"http://orange.turntip.cn/uploads/busy-server/5_193783ef7f0.jpg",theme:{name:"Latte",palette:["#282828","#8E8E93"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#3A3A3C","--root-bgcolor":"#1A1A1C","--root-color":"#ffffff","--color":"#ffffff","--bgcolor":"#000000","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}},{text:"活力",coverImg:"http://orange.turntip.cn/uploads/busy-server/6_193783f19c6.jpg",theme:{name:"Latte",palette:["#69D4C4","#ffffff","#CBC9CC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#2E2933","--root-bgcolor":"#D9F494","--root-color":"#2E2933","--color":"#ffffff","--bgcolor":"#2E2933","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}},{text:"清新",coverImg:"http://orange.turntip.cn/uploads/busy-server/7_193783f3d98.jpg",theme:{name:"Latte",palette:["#384559"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#89A1C5","--root-bgcolor":"#384559","--root-color":"#ffffff","--color":"#384559","--bgcolor":"#EDF4F8","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}}}],U=["onClick"],H=["src"],G=h({__name:"index",emits:["changeTheme"],setup(e,{emit:a}){const o=a;return(e,a)=>{const t=u,l=m;return b(),x("div",{class:k(L(J).mindThemeContainer)},[w(l,{direction:"vertical",fill:""},{default:C((()=>[(b(!0),x(y,null,j(L(N),(e=>(b(),x("div",{class:k(L(J).card),key:e.text,onClick:a=>{o("changeTheme",e)}},[w(t,{hoverable:"","body-style":"padding: 0;height:140px",bordered:!1},{default:C((()=>[I("img",{loading:"lazy",src:e.coverImg,alt:""},null,8,H)])),_:2},1024),I("div",{class:k(L(J).cardTitle)},D(e.text),3)],10,U)))),128))])),_:1})],2)}}}),K={container:"_container_15vsm_1",mainbox:"_mainbox_15vsm_8",iconContainer:"_iconContainer_15vsm_21",search_icon:"_search_icon_15vsm_27",checkbox:"_checkbox_15vsm_32",search_input:"_search_input_15vsm_42",search_btn:"_search_btn_15vsm_46",demo:"_demo_15vsm_98",fadeIn:"_fadeIn_15vsm_1",demoItem:"_demoItem_15vsm_114",font:"_font_15vsm_123",fontCol1:"_fontCol1_15vsm_128",fontCol2:"_fontCol2_15vsm_131"},Q=["onClick"],X=e(h({__name:"index",emits:["handleAiSearch"],setup(e,{emit:a}){const o=a,t=T(""),l=[{text:"生成一个前端学习技术路线",class:K.fontCol1},{text:"互联网软件商业模式设计",class:K.fontCol2}],n=()=>{o("handleAiSearch",t.value)};return(e,a)=>{const o=p,s=v,r=m;return b(),x("div",{class:k(L(K).container)},[I("input",{checked:"",class:k(L(K).checkbox),type:"checkbox"},null,2),I("div",{class:k(L(K).mainbox)},[I("div",{class:k(L(K).iconContainer)},a[1]||(a[1]=[I("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1.5em",viewBox:"0 0 576 512"},[I("path",{fill:"#fc9157",d:"M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1l14.1 37.7c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2l-37.7-14.1L263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0l381.3-381.4c18.7-18.7 18.7-49.1 0-67.9l-34.6-34.5c-18.7-18.7-49.1-18.7-67.9 0zM484.6 82.6l-105 105l-23.3-23.3l105-105zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L64 96zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352z"})],-1)]),2),I("div",{class:k([L(K).search_input,"flx-ce-bet"])},[w(o,{modelValue:L(t),"onUpdate:modelValue":a[0]||(a[0]=e=>B(t)?t.value=e:null),onPressEnter:n,placeholder:"请输入您想生成的内容",type:"text"},null,8,["modelValue"]),w(s,{size:"small",class:k(L(K).search_btn),onClick:n},{default:C((()=>a[2]||(a[2]=[F("生成")]))),_:1},8,["class"])],2)],2),w(r,{class:k([L(K).demo,"flx-ce-ce"])},{default:C((()=>[(b(),x(y,null,j(l,(e=>I("div",{key:e.text,class:k([L(K).demoItem,L(K).font,e.class]),onClick:a=>{return o=e.text,void(t.value=o);var o}},D(e.text),11,Q))),64))])),_:1},8,["class"])],2)}}}),[["__scopeId","data-v-fbf847ec"]]);const Y={spin:"_spin_37p2z_1",editWrap:"_editWrap_37p2z_4",saveBtn:"_saveBtn_37p2z_19"};var Z="/files/";const ee={style:{display:"block"},class:"w100"},ae=h({__name:"Editor",emits:["handleChangeData"],setup(e,{expose:u,emit:m}){var p,v;const h=R((()=>s((()=>import("./mind-p792O8dd.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))),y=T(!1),j=T(),D=T(!0),B=o(),F=T(!0),J=T(!1);T(!1);const N=T(!1),U=!!(null==(p=t())?void 0:p.i),H=S({});let K=null==(v=t())?void 0:v.id;const Q=T(null),{pathname:ae}=location,oe=[`${Z}mind`,`${Z}mind/p`,`${Z}mind/w`],te=S({title:"",vt:(new Date).getTime(),hasFav:!1,data:null,docType:"mind",status:"0",isPreview:!1}),le=m;const ne=async e=>{if(e){J.value=!0;try{const t=await(o={type:"mind",text:e},a.get("/ai/tyqw",{params:o})),l=function(e){const a="```json";if(e.startsWith(a)&&e.endsWith("```"))try{const a=e.slice(7,-3).trim();return JSON.parse(a)}catch(o){console.error("Failed to parse JSON:",o)}return null}(t.output.text);null!==l?(H.nodeData={...l},q((()=>{j.value.bestowData(H),j.value.handleSave()}))):g.error("您输入的内容不符合规范"),J.value=!1}catch(t){J.value=!1}var o}else g.error("输入内容为空，请告诉我您希望创建关于哪个主题的思维导图")};A((()=>te.status),(e=>{(()=>{const e=te.status;N.value=ae===`${Z}mind/p`?!["1","2","0"].includes(e):ae!==`${Z}mind/w`})()}),{immediate:!0});const se=E((()=>U||!N.value?"100%":"calc(100% - 240px)")),re=e=>{j.value.changeTheme(e.theme)},ie=async e=>{var a,o,s,r,i,c,u,m;if(D.value){if(Object.assign(H,e),oe.includes(ae)){const{tid:f}=await d({tid:(null==(a=t())?void 0:a.isTpl)?"":(null==(o=t())?void 0:o.tid)||"",title:te.title||(null==(s=t())?void 0:s.title)||"",data:H,uid:(null==(r=t())?void 0:r.uid)||B.userId,space:(null==(i=t())?void 0:i.space)||"",type:"mind"});if((null==(c=t())?void 0:c.isTpl)&&(l("isTpl"),n("tid",f)),te.vt=(new Date).getTime(),te.data={...e},!(null==(u=t())?void 0:u.tid)&&(null==(m=t())?void 0:m.title)){const e=new URL(window.location.href);e.searchParams.set("tid",f),window.history.pushState({path:e.toString()},"",e.toString())}K=f}else{const a=await f(K,e);K=a}var p;p=K,window.parent&&window.parent.handleSaveMind&&window.parent.handleSaveMind(p)}};return $((()=>{var e;const a=window.parent.location.pathname;[`${Z}editor/p`,`${Z}editor/w`].includes(a)||(null==(e=t(window.parent.location.href))?void 0:e.isDemo)?D.value=!1:D.value=!0})),V((async()=>{var e,a,o,l,n,s,d,f,u,m;if(oe.includes(ae)){const c={tid:null==(e=t())?void 0:e.tid,uid:(null==(a=t())?void 0:a.uid)||B.userId},p=(null==(o=t())?void 0:o.uid)?await r(c):await i(c);(null==(l=t())?void 0:l.uid)&&(ae===`${Z}mind`&&p.status&&["1","2","4"].includes(p.status)&&(null==(n=t())?void 0:n.uid)&&(null==(s=t())?void 0:s.uid)!==B.userId&&(location.href=`${Z}forbiddenPage`),ae===`${Z}mind/p`&&(p.status&&"1"===p.status?(null==(d=t())?void 0:d.uid)&&(null==(f=t())?void 0:f.uid)!==B.userId?location.href=`${Z}forbiddenPage`:D.value=!1:p.status&&"2"===p.status?(D.value=!1,te.isPreview=!0):D.value=!0),ae===`${Z}mind/w`&&(D.value=!1,te.isPreview=!0)),Q.value=p.data?{...p.data}:null,te.data={...Q.value},te.title=p.title||(null==(u=t())?void 0:u.title)||"",te.vt=p.vt||"",te.hasFav=p.hasFav||!1,te.status=p.status||"0",Object.assign(H,Q.value),(null==(m=t())?void 0:m.isTpl)&&ie(Q.value),le("handleChangeData",te)}else if(K){const e=await c(K);Q.value=e?{...e}:null}F.value=!1,y.value=!0})),u({handleTitleChangeSave:e=>{te.title=e,ie(H)},mindRef:j}),(e,a)=>{const o=_,t=z("aiLoding");return M((b(),x("div",ee,[I("div",{class:k([U?"":"flex"])},[!U&&L(N)?(b(),P(G,{key:0,onChangeTheme:re})):O("",!0),w(o,{style:W({width:L(se)}),class:k(L(Y).spin),loading:L(F),tip:"画布加载中..."},{default:C((()=>[I("div",{class:k(L(Y).editWrap),style:W({margin:U?"":"70px 0px 0px",height:U?"100vh":"calc(100vh - 70px)"})},[L(y)?(b(),P(L(h),{key:0,ref_key:"mindRef",ref:j,data:L(Q),onSave:ie},null,8,["data"])):O("",!0),L(D)?(b(),P(X,{key:1,onHandleAiSearch:ne})):O("",!0)],6)])),_:1},8,["style","class","loading"])],2)])),[[t,L(J)]])}}});export{ae as _,N as c};
