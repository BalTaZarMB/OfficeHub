import{i as e,h as t,n as a}from"./index-CP9bbISh.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index-CVht5qs2.js";/* empty css              *//* empty css              */import{r as n,a as r,u as o,R as i,L as s,a9 as l,d,c,a4 as p,j as u,n as m,A as g,$ as h}from"./vue-CE51Rq-N.js";/* empty css              */import{_ as f}from"./index.vue_vue_type_script_setup_true_lang-BjN5Q8E7.js";import{f as x}from"./index.esm-CMCG6-Sp.js";import{e as v}from"./mitt-DRzrVJO_.js";import{a4 as y,c as _,a1 as j,a5 as I,B as b,Y as k}from"./arco-CSlgBs8T.js";const C="/files/assets/user-CdditKA0.png",w="_btnCol_15ko7_1",S="_htmlIcon_15ko7_4",z="_tagBcol_15ko7_17";function A(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!i(e)}const D=e=>{if("string"!=typeof e)return C;const t=(e.split(",")||"").map((e=>e.trim()));return t.length>1?t[0]:e||C};function F(e){const n={text:e=>e,time:e=>({...e,render:t=>x(t.record[e.dataIndex])}),open:e=>({...e,render:t=>o("span",{class:"pointer",onClick:()=>{return a=t.record[e.dataIndex],void window.open(a);var a}},[t.record[e.dataIndex]])}),textIcon:e=>({...e,render:a=>o("span",{style:{width:"400px"},class:[S],onClick:()=>(e=>{v.emit("handleTextIcon",e)})(a.record)},[o(f,{class:t(a.record[e.iconFileName]).className,icon:t(a.record[e.iconFileName]).icon},null),o("span",null,[a.record[e.dataIndex]])])}),switch:e=>({...e,render:t=>o("div",null,[o(y,{"model-value":t.record[e.dataIndex],checkedValue:1,uncheckedValue:0,onChange:e=>{}},null)])}),changeText:e=>({...e,render:t=>a(e.selectData,t.record[e.dataIndex])}),index:e=>({...e,render:e=>`${e.rowIndex+1}`}),image:e=>({...e,render:t=>o(_,{class:"tableImgStyle",src:D(t.record[e.dataIndex])},null)}),tag:e=>({...e,render:t=>{const a=t.record[e.dataIndex];return Array.isArray(a)?o("div",null,[a.map(((e,t)=>o(j,{key:t,class:z},A(e)?e:{default:()=>[e]})))]):o(j,{class:z},A(a)?a:{default:()=>[a]})}})}[e.type];return n?n(e):{...e,render:e=>o("span",{class:"pointer",onClick:()=>(e=>{v.emit("handleCellClick",e)})(e)},[e.record[e.column.dataIndex]||"-"])}}const N=e=>{let t="";return t=(null==e?void 0:e.type)&&"dir"===(null==e?void 0:e.type)?"删除文件夹后, 文件夹内文件也会删除, 是否确认删除文件夹？":"是否确认删除？",t};function O(e){return{title:"操作",fixed:"right",align:"right",...e.operationAttribute,render:t=>{var a;return o("div",null,[null==(a=e.operation)?void 0:a.map(((e,a)=>{const n=`${e.type}-${a}`;return"delete"===e.type?o(I,{key:n,content:N(t.record),onOk:()=>{return e=t.record,void v.emit("handleBtnOptionDel",e);var e},type:"error"},{default:()=>[o(b,{type:"text",status:"danger"},{default:()=>[e.btnName]})]}):e.isShowFiled&&t.record[e.isShowFiled]==e.isShowFiledVal?void 0:s(o(b,{key:n,class:w,type:"text",onClick:()=>((e,t)=>{const a={optionItem:e,tableItemData:t};v.emit("handleBtnOption",a)})(e,t)},{default:()=>[e.btnName]}),[[l("if"),t.record[e.isShowFiled]!=e.isShowFiledVal]])}))])}}}const V=d({__name:"index",props:{schema:{}},setup(t,{expose:a}){const i=t,{columns:s,data:l,pagination:d,apiConfig:f,operation:x,size:v,otherTableConfig:y}=i.schema,{tableData:_,loading:j,tablePagination:I,fetchData:b,setRefresh:C}=function(t,a){const o=n([]),i=n(!1),s=r({current:1,pageSize:10,total:0,showQuickJumper:!0,showSizeChanger:!0,onChange(e,t){}}),l=async(n={},r=!1)=>{i.value=!0;try{if(null==t?void 0:t.apiUrl){const a={page:r?1:s.current,pagesize:r?10:s.pageSize,...t.params,...n},{list:d,total:c}=await e.get(t.apiUrl,{params:a});i.value=!1,o.value=d||[],r&&(s.current=1,s.pageSize=10),s.total=c||0,s.onChange=(e,t)=>{s.current=e,s.pageSize=t||10,l(n)}}else i.value=!1,o.value=a||[],s.total=(null==a?void 0:a.length)||0}catch(d){i.value=!1}};return{tableData:o,loading:i,tablePagination:s,fetchData:l,setRefresh:function(e={},t=!0){l(e,t)}}}(f,l),w=n(d),S=c((()=>{const e=s.map((e=>F(e)));if(Array.isArray(x)){const t=O(i.schema);e.push(t)}return e}));return p((()=>{b()})),a({setRefresh:C}),(e,t)=>(u(),m("div",null,[o(h(k),g({bordered:!1,size:h(v),columns:h(S),data:h(_),pagination:h(w)?h(I):h(w),loading:h(j)},h(y)),null,16,["size","columns","data","pagination","loading"])]))}});export{V as _};
